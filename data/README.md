# NBA BetIQ Data Documentation

This directory contains all data used in the NBA BetIQ project for the **2018-2019 NBA season**.

## Directory Structure

```
data/
├── raw/          # Original, unprocessed data files
├── processed/    # Cleaned and feature-engineered datasets
└── README.md     # This file
```

---

## Raw Data (`raw/`)

### `vegas.txt`
- **Description**: Regular season betting odds and public betting percentages
- **Source**: Historical sportsbook data
- **Columns**:
  - Date
  - Teams (Home/Away)
  - Opening/Closing lines (Moneyline, Spread, Total)
  - Public betting percentages
  - Line movements

### `vegas_playoff.txt`
- **Description**: Playoff betting odds (same format as `vegas.txt`)
- **Use**: Playoff games analysis

### `raw_scores.txt`
- **Description**: Final scores and box score statistics
- **Source**: NBA official data
- **Columns**:
  - Game ID
  - Date
  - Teams
  - Final scores
  - Basic box score stats (FG%, 3P%, FT%, Rebounds, etc.)

### `NBA_2019_Shots.csv`
- **Description**: Shot-level data for entire 2018-19 season
- **Source**: NBA Stats API
- **Columns**:
  - Shot location (x, y coordinates)
  - Shot type (2PT, 3PT)
  - Shot distance
  - Shot result (made/missed)
  - Player, team, game info

---

## Processed Data (`processed/`)

These files are generated by the ETL pipeline (`etl/` scripts).

### `games_master_2018_19.csv`
- **Description**: Master dataset with all features for modeling
- **Generated By**: `etl/04_feature_engineering.py`
- **Columns**:
  - Game identifiers (Date, teams, game_id)
  - Team statistics (FG%, 3P%, rebounds, assists, etc.)
  - Betting lines (spread, total, moneyline)
  - Public betting percentages
  - Line movement features
  - Schedule features (rest days, back-to-back, etc.)
  - Derived features (implied probabilities, pace, efficiency)

### `betting_outcomes_2018_19.csv`
- **Description**: Actual betting outcomes for all games
- **Generated By**: `etl/04_feature_engineering.py`
- **Columns**:
  - Game identifiers
  - Actual results (home_win, spread_cover, total_over_under)
  - Opening vs closing line comparisons
  - Public betting performance

---

## Data Pipeline Flow

```
Raw Data Sources
      ↓
01_clean_odds.py         → Clean betting odds
      ↓
02_clean_scores.py       → Clean game scores
      ↓
03_clean_shots.py        → Clean shot data
      ↓
04_feature_engineering.py → Create master dataset
      ↓
games_master_2018_19.csv (ready for ML)
```

---

## Key Features Engineered

### Betting Features
- `implied_prob_home`: Implied probability from moneyline
- `implied_prob_spread`: Implied probability from spread
- `implied_prob_total`: Implied probability from total
- `line_movement`: Opening vs closing line difference
- `public_betting_pct`: Percentage of bets on each side

### Team Performance Features
- `HOME_FG_PCT`, `AWAY_FG_PCT`: Field goal percentages
- `HOME_FG3_PCT`, `AWAY_FG3_PCT`: Three-point percentages
- `HOME_REB`, `AWAY_REB`: Total rebounds
- `HOME_AST`, `AWAY_AST`: Assists
- `HOME_TOV`, `AWAY_TOV`: Turnovers

### Schedule Features
- `home_rest_days`: Days since last home game
- `away_rest_days`: Days since last away game
- `home_back_to_back`: Binary indicator
- `away_back_to_back`: Binary indicator

### Advanced Metrics
- `pace`: Estimated game pace
- `home_offensive_rating`: Points per 100 possessions
- `home_defensive_rating`: Points allowed per 100 possessions

---

## Data Quality Notes

- **Missing Values**: Handled in ETL pipeline (filled with 0 or median)
- **Outliers**: Preserved (represent real game variance)
- **Data Leakage**: Careful to use only pre-game information for features
- **Target Variables**:
  - `home_win`: 1 if home team won, 0 otherwise
  - `home_spread_cover`: 1 if home team covered spread
  - `ou_over_win`: 1 if total went over

---

## Usage

To regenerate processed data:

```bash
# Run full ETL pipeline
python etl/01_clean_odds.py
python etl/02_clean_scores.py
python etl/03_clean_shots.py
python etl/04_feature_engineering.py
```

The final output will be in `data/processed/games_master_2018_19.csv`.

---

## Data Statistics

- **Regular Season Games**: ~1,230 games
- **Playoff Games**: ~90 games
- **Total Features**: ~50+ columns
- **Date Range**: October 2018 - June 2019

---

## Important Notes

⚠️ **Do NOT commit raw data files to Git**
- Raw CSV/TXT files are in `.gitignore`
- Download from original sources if needed

⚠️ **Processed files can be regenerated**
- Run ETL pipeline to recreate from raw data
- Ensures reproducibility
